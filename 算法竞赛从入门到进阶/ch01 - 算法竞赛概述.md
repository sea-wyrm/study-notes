## ch01 - 算法竞赛概述

### 1.3 判题和基本的输入输出

#### 1.3.1 竞赛语言和训练平台

> 主要的学习方法是“刷题”

**刷题网站**

1. [洛谷](www.luogu.com/)
2. [poj](http://poj.org/)
3. [acm](https://www.acm.org/)
4. [usaco](http://www.usaco.org/)

---

#### 1.3.2 判题和基本的输入输出

OJ 是计算机自动判题，是一种黑盒测试。不关心程序的内容，而是用测试数据来验证。
OJ 后台存储了每个题目的多组测试数据，有输入数据和对应的输出数据。
OJ 运行用户提交的程序后读取输入数据，程序产生的输出与后台的标准输出进行对比，可以得到以下结果之一：
- AC
- TLE（超时，一般说明方法错误，需要重来）
- PE（结果正确，但格式错误）
- WA
- RE
- MLE
由于 OJ 不看程序过程，所以可以直接打印结果，这种行为叫“打表”。程序如果需要预处理数据，也称为“打表”。

##### 1. 输入与输出函数

C++ 标准输入输出为 `cin`、`cout`
C 语言的输入与输出函数如下：
- `putchar()`：把一个字符常量输出到显示器屏幕上
- `getchar()`：从键盘上输入一个字符常量
- `printf()`：把数据按格式输出到显示器屏幕上
- `scanf()`：从键盘上输入各类数据
- `puts()`：把一个字符串常量输出到显示器屏幕上
- `gets()`：从键盘上输入一个字符串常量
- `sscanf()`：从一个字符串中提取各类数据

##### 2. 输入结束方式

1. 默认结束。文件以 (EOF) 为结束标志。例：

    ```cpp
    int main(){
        int a, b;
        // while (~scanf("%d%d), &a, &b)
        while (scanf("%d%d", &a, &b) != EOF) {
            ...;
        }
        return 0;
    }
    ```
    没有输入，`scanf("%d%d), &a, &b)` 返回 EOF，系统定义 EOF = -1，取反得 0。

2. 指定元素个数

3. 以特定元素作为结束符。例：以 0 作为结束符

    ```cpp
    while (~scanf("%d", &n) && n)
    ```
    
##### 3. 输入与输出的效率

`printf()` 和 `scanf()` 输出比 `cin` 和 `cout` 快。

---

#### 1.3.3 测试

##### 1. 构造测试数据

1. 在程序中加入测试代码
    
    ```cpp
    #define myTest
    #ifdef myTest
        freopen("test.in", "r", std);
        freopen("test.out", "w", std);
    #endif
    ```

    提交时，去掉 `#define myTest` 即可。

2. 在行命令中重定向
    这种方法不需要在程序中添加代码。例：生成的可执行文件为 `abc`，行命令中可以直接输入输出到文件：
    ```shell
    abc <test.in> test.out
    ```

##### 2. 对比测试数据

对于复杂的题目，可能需要写两个程序：一个是提交到 OJ 的“好”程序；另一个是暴力法程序，目的是用它生成测试数据。这种方法称为**对拍**。

在测试的时候，可以用行命令比较两个程序的输出是否一致。例如在 Windows 系统下，生成的可执行文件分别是 `abc.exe`、`abc_1.exe`，用文件比较命令 `fc` 比较它们是否一致。

```shell
abc.exe <test.in> test1.out
abc_1.exe <test.in> test2.out
fc test1.out test2.out
```

在 Linux 系统中，文件比较命令时 `diff`。

#### 1.3.4 编码速度

1. 读题快

2. 熟练掌握编译器或 IDE

3. 不霸占计算机。一人编码，两人手写

4. 减少调试。少用指针、使用静态数组、把逻辑功能模块化，不用动态调试方法（单步跟踪、断点等调试工具），需要检查数据时，用 `cout` 或 `printf` 打印出调试信息

5. 互相检查

6. 使用 STL

7. 编码小技巧。如把长字符串重新定义成短字符

```cpp
typedef long long ll;

long long a = 123456;
// -> 简洁
ll b = 123456;
```

#### 1.3.5 模版

模版是参赛选手认为有用的代码片段，将其打印出来，允许带进赛场作为“小抄”。

#### 1.3.6 题目分类

- `Ad Hoc`, 杂题
- `Complete Search (Iterative / Recursive)`, 穷举搜索（迭代/回溯）
- `Divide and Conquer`, 分治法
- `Greedy (Usually the original one)`, 贪心法
- `Dynamic Programming (usually the original one)`, 动态规划
- `Graph`, 图论
- `Mathematics`, 数学
- `String Processing`, 字符串处理
- `Computational Geometry,` 计算几何
- `Some Harder/Rare Problem`, 罕见问题

#### 1.3.7 代码规范

1. header。使用万能头文件 `<bits/stdc++.h>`，OJ 网站一般都支持，除了 poj。不要用 C 风格的 header

2. 输入判断结尾不用 EOF，用 ～。`while (~scanf("%d", &a))`

3. 换行。使用 K&R 风格，即左大括号不换行，右大括号单列一行

4. 变量定义在这个变量被调用的最近的地方。例如：

    ```cpp
    for (int i = 0; i < n; ++i) { // i 只在这个循环体内使用
        int s = i * n;
    }
    ```

5. 最好不要用宏。

6. 参考资料。

    - Google C++ 规范：( https://zh-google-styleguide.readthedocs.io/en/latest/google-cpp-styleguide/contents/ )
    - Linux C 规范：( https://www.kernel.org/doc/html/v4.13/translations/zh_CN/coding-style.html )

